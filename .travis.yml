language: node_js
node_js:
  - "10.15.3"

stages:
  - name: test
    os: osx
    before_script: npm run-script build
    install: npm i -g recursive-install && npm-recursive-install

    addons:
      chrome: stable

    after_success:
      - wget https://raw.githubusercontent.com/DiscordHooks/travis-ci-discord-webhook/master/send.sh
      - chmod +x send.sh
      - ./send.sh success $WEBHOOK_URL
    after_failure:
      - wget https://raw.githubusercontent.com/DiscordHooks/travis-ci-discord-webhook/master/send.sh
      - chmod +x send.sh
      - ./send.sh failure $WEBHOOK_URL
  - name: deploy
    if: type = push
    script: curl $DEPLOY_SCRIPT | bash
    os: linux
