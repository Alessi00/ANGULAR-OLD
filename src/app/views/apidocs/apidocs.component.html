<h2>API Docs</h2>

<div class="col-xs-12">
  <p>The goal of TOA API is to provide us, and potential outside users a way to query our databases. </p>
  <p>The Base URL for accessing anything related to our API is <a href="http://theorangealliance.org/apiv2">http://theorangealliance.org/apiv2</a></p>

  <h1 mdcHeadline5>Gaining Access to TOA API</h1>
  <p>In order to gain access to TOA API, you need to first gain access to an API key. Once you have that key, you must set two custom headers with every GET request. You must set <code>X-Application-Origin</code> to the name of your application. Secondly, you must set <code>X-TOA-Key</code> to your API key. </p>

  <div class="no-underline col-12 mt-2">
    <a href="https://goo.gl/forms/u3E1sMuCNT9UcPmH3" target="_blank">
      <mdc-card class="toa-card link-card">
        <div class="link-card-icon">
          <mat-icon svgIcon="link"></mat-icon>
        </div>
        <div class="link-card-content">
          <div class="link-card-title">Apply for an API Key</div>
          <div class="gray">Related Link</div>
        </div>
      </mdc-card>
    </a>
  </div>

  <h1 mdcHeadline5 class="mt-4">API Access Levels</h1>
  <div class="row">
    <mdc-card class="toa-card p-0 col-md-3 col-12 m-2">
      <li class="list-group-item bg-primary border-0">Level 0</li>
      <li class="list-group-item border-0">Revoked/not yet approved API key</li>
      <li class="list-group-item  border-0">Every request to TOA API with this key will be denied with a 403 status</li>
    </mdc-card>
    <mdc-card class="toa-card p-0 col-md-3 col-12 m-2">
      <li class="list-group-item bg-primary border-0">Level 1</li>
      <li class="list-group-item border-0">Single-purpose/team API Key</li>
      <li class="list-group-item  border-0">Rate limit of 30 requests/minute</li>
    </mdc-card>
    <mdc-card class="toa-card p-0 col-md-3 col-12 m-2">
      <li class="list-group-item bg-primary border-0">Level 2</li>
      <li class="list-group-item border-0">Full developer access/application API Key</li>
      <li class="list-group-item  border-0">There is no limit on rates</li>
    </mdc-card>
  </div>

  <p>* Every request is tracked</p>
  <p>* All data is returned in JSON format</p>
</div>

<h1 mdcHeadline5 class="mt-4">API Route</h1>

<table class="table table-bordered">
  <thead>
    <tr>
      <th scope="col">Route</th>
      <th scope="col">Description</th>
      <th scope="col">Example</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let route of api_routes">
      <th><a href="http://theorangealliance.org{{ route.route }}" target="_blank">{{ route.route }}</a></th>
      <td>{{ route.route_desc }}</td>
      <td><button mdc-button [disabled]="!route.example" data-toggle="modal" [attr.data-target]="'#route' + route.route_key">Example</button></td>

      <div class="modal fade bd-example-modal-lg" [id]="'route' + route.route_key" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
          <div class="modal-content">
            <mdc-dialog-header title="{{ route.route }}"></mdc-dialog-header>
            <mdc-dialog-body>
              {{ route.route_desc }}
              <pre>{{ stringify(route.example) }}</pre>
            </mdc-dialog-body>
            <mdc-dialog-footer>
              <button mdc-dialog-button [attr.data-dismiss]="'modal'">Close</button>
            </mdc-dialog-footer>
          </div>
        </div>
      </div>

    </tr>
  </tbody>
</table>
